!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core")):"function"==typeof define&&define.amd?define("angular-google-tag-manager",["exports","@angular/core"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["angular-google-tag-manager"]={},e.ng.core)}(this,(function(e,t){"use strict";var o=function(){function e(e,t,o,a){if(void 0===e&&(e={id:null}),this.config=e,this.googleTagManagerId=t,this.googleTagManagerAuth=o,this.googleTagManagerPreview=a,this.isLoaded=!1,this.browserGlobals={windowRef:function(){return window},documentRef:function(){return document}},null==this.config&&(this.config={id:null}),this.config=Object.assign(Object.assign({},this.config),{id:t||this.config.id,gtm_auth:o||this.config.gtm_auth,gtm_preview:a||this.config.gtm_preview}),null==this.config.id)throw new Error("Google tag manager ID not provided.")}return e.prototype.getDataLayer=function(){var e=this.browserGlobals.windowRef();return e.dataLayer=e.dataLayer||[],e.dataLayer},e.prototype.pushOnDataLayer=function(e){this.getDataLayer().push(e)},e.prototype.addGtmToDom=function(){if(!this.isLoaded){var e=this.browserGlobals.documentRef();this.pushOnDataLayer({"gtm.start":(new Date).getTime(),event:"gtm.js"});var t=e.createElement("script");t.id="GTMscript",t.async=!0,t.src=this.applyGtmQueryParams("https://www.googletagmanager.com/gtm.js"),e.head.insertBefore(t,e.head.firstChild),this.isLoaded=!0}},e.prototype.pushTag=function(e){this.isLoaded||this.addGtmToDom(),this.pushOnDataLayer(e)},e.prototype.applyGtmQueryParams=function(e){var t=this;return-1===e.indexOf("?")&&(e+="?"),e+Object.keys(this.config).filter((function(e){return t.config[e]})).map((function(e){return e+"="+t.config[e]})).join("&")},e}();o.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:["googleTagManagerConfig"]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:["googleTagManagerId"]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:["googleTagManagerAuth"]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:["googleTagManagerPreview"]}]}]},o.ɵprov=t.ɵɵdefineInjectable({factory:function(){return new o(t.ɵɵinject("googleTagManagerConfig",8),t.ɵɵinject("googleTagManagerId",8),t.ɵɵinject("googleTagManagerAuth",8),t.ɵɵinject("googleTagManagerPreview",8))},token:o,providedIn:"root"});var a=function(){function e(){}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:"googleTagManagerConfig",useValue:t}]}},e}();a.decorators=[{type:t.NgModule}],e.GoogleTagManagerModule=a,e.GoogleTagManagerService=o,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-google-tag-manager.umd.min.js.map